<div class="row">

	<div class="medium-3 medium-push-9 columns">
		<div class="ldpanel clearfix">
			
			<div class="row">
				<div class="medium-12 columns">
					<h5>Hello, <%= @current_user.user_profile.firstname rescue @current_user.email %></h5>
				</div>
			</div>

			<div class="row">
				<div class="medium-12 columns">
					<%= link_to 'Dashboard', dashboard_url %>
				</div>
			</div>

			<div class="row">
				<div class="medium-12 columns">
					<%= link_to 'Logout', logout_url %>
				</div>
			</div>

		</div>
	</div>

	<div class="medium-9 medium-pull-3 columns">
		
		



<% if flash[:error] %>
	<%= flash[:error] %> <br>
<% end %>

<%= render partial: "shared/headpaneltop" %>

	<div class="row">
		<div class="medium-12 columns">
			<h1>Edit <strong>Distributor Profile</strong></h1>
		</div>
	</div>
<%= render partial: "shared/headpanelbottom" %>

<%= render partial: "shared/paneltop" %>
	<div class="row">
		<div class="medium-12 columns">
			<h1>Company Name</h1>
		</div>
	</div>
	<div class="row">
		<%= form_for @distributor, url: distributor_url do |f| %>
		<div class="medium-12 columns">
			<%= f.text_area :name, rows: 2, style: "font-size:2em; font-weight:bold;", placeholder: "Distributor Name" %>
		</div>
		<div class="medium-12 columns">
			<%= f.submit 'Update', class: "small radius success button right" %>
		</div>
		<% end %>
	</div>
<%= render partial: "shared/panelbottom" %>


<%= render partial: "shared/paneltop" %>
	<div class="row">
		<div class="medium-12 columns">
			<h1>General Information</h1>
		</div>
	</div>
	<%= form_for @distributor, url: distributor_url do |f| %>
	<div class="row">
		<div class="medium-6 columns">
			<h3>Company Info</h3>
		</div>
	</div>				
	<div class="row">
		<div class="medium-6 columns">
			<%= f.text_field :country_of_origin, class: "country-autocomplete", placeholder: 'Country of origin' %>
		</div>
		<div class="medium-6 columns">				
			<%= label_tag(:year_established, "Year established") %>
			<%= select_tag :year_established, options_for_select(1970..Time.now.year, @distributor.year_established ? @distributor.year_established.strftime("%Y") : '') %>
		</div>
	</div>
	<div class="row">
		<div class="medium-12 columns">
			<%= f.text_field :website %>
		</div>
	</div>
	<%= f.fields_for :contact_info do |ff| %>
	<div class="row">
		<div class="medium-6 columns">
			<h3>Company Contact Info</h3>
		</div>
	</div>
	<div class="row">
		<div class="medium-6 columns">
			<%= ff.text_field :contact_name %>
		</div>
		<div class="medium-6 columns">
			<%= ff.text_field :contact_title %>
		</div>						
	</div>
	<div class="row">
		<div class="medium-6 columns">
			<%= ff.text_field :email %>
		</div>
		<div class="medium-6 columns">
			<%= ff.text_field :phone %>
		</div>
	</div>
	<div class="row">
		<div class="medium-6 columns">
			<h3>Company Address</h3>
		</div>
	</div>						
	<div class="row">
		<div class="medium-12 columns">
			<%= ff.text_field :address1, label: "Address" %>
		</div>
	</div>
	<div class="row">
		<div class="medium-12 columns">
			<%= ff.text_field :address2, label: "Address (cont'd)" %>
		</div>
	</div>
	<div class="row">
		<div class="medium-4 columns">
			<%= ff.text_field :city %>
		</div>
		<div class="medium-4 columns">
			<%= ff.text_field :state %>
		</div>
		<div class="medium-4 columns">
			<%= ff.text_field :postcode %>
		</div>
	</div>
	<div class="row">
		<div class="medium-6 columns">
			<%= ff.text_field :country, class: "country-autocomplete", placeholder: 'Country' %>
		</div>
	</div>
	<% end %>

	<%= f.submit 'Update', class: "small radius success button right"  %>

	<% end %>

<%= render partial: "shared/panelbottom" %>



<%= render partial: "shared/paneltop" %>
	<div class="row">
		<div class="medium-12 columns">
			<h1>Sector and Channel Profile</h1>
		</div>
	</div>
	<div class="row">
		<%= form_for @distributor, url: distributor_url do |f| %>
		<div class="medium-6 columns">
		<%= f.hidden_field :name %>		
		<h3>Sectors</h3>
			<% Sector.each do |sc| %>
		    <div>
		      <%= check_box_tag "sectors[#{sc.id}]", sc.id, (@distributor.sectors.find(sc) rescue false) ? true : false %>
		      <%= label_tag("sectors[#{sc.id}]", sc.name) %>
		    </div>
		  <% end %>
		</div>
		<div class="medium-6 columns">						
			<h3>Channels</h3>
			<% Channel.each do |ch| %>
		    <div>
		    	<%= check_box_tag "channels[#{ch.id}]", ch.id, (@distributor.channels.find(ch) rescue false) ? true : false  %>
		      <%= label_tag("channels[#{ch.id}]", ch.name) %>
		    </div>
		  <% end %>
		</div>
	</div>
	<div class="row">
		<div class="medium-12 columns">
			<br>
			<%= f.submit 'Update', class: "small radius success button right" %>
		</div>
	</div>
	<% end %>
			
<%= render partial: "shared/panelbottom" %>

<%= render partial: "shared/paneltop" %>

<div class="row">
	<div class="medium-12 columns">
		<h1>Channel Capacity</h1>
	</div>
</div>

<div class="row">
	<div class="medium-6 columns">

		<table>
		<thead><tr><th>Channel</th><th>Capacity</th></tr></thead>
		<tbody>
				<%= form_tag(channel_capacity_bulkupdate_url, method: "post") do  %>
					
					<% @distributor.channels.each do |chan| %>
						<tr>
						<td><%= label_tag "channel_capacity[bulk_ids][#{chan.id}]", chan.name, class: "inline right" %></td>
						<td><%= number_field_tag("channel_capacity[bulk_ids][#{chan.id}]", @distributor.channel_capacities.where(channel_id: chan.id).first.capacity) %></td>
						</tr>
					<% end %>

					<% if @distributor.channel_capacities.where(channel_id: 0).first %>
						<tr>
							<th colspan="2">Custom Channels </th>
						</tr>
					<% end %>
					<% @distributor.channel_capacities.where(channel_id: 0).each do |cc| %>
						<tr>
						<td><%= cc.custom_channel_name %></td>
						<td><%= number_field_tag("channel_capacity[bulk_ids][#{cc.id}]", cc.capacity) %>
						<%= link_to 'Delete', cc, :method => :delete, data: { :confirm => "Are you sure you want to delete #{cc.custom_channel_name}?"}%>
						</td>
						</tr>
					<% end %>

						<tr><td colspan="3" class="text-right"><%= submit_tag('Update', class: "small radius success button") %></td></tr>
				<% end %>					

		</tbody>
		</table>
	</div>
	<div class="medium-6 columns">
		<table>
			<tbody>
				<%= form_for @new_channel_capacity, :html => { :id => "new_channel_capacity" } do |f| %>
					<tr>
						<th colspan="2">Add Custom Channels </th>
					</tr>								
					<tr>
						<td>
							<%= f.text_field :custom_channel_name, label: false, placeholder: 'Custom Channel Name' %>
						</td>
						<td><%= link_to 'Add', "#", :onclick => "$('#new_channel_capacity').submit()".html_safe %></td>
					</tr>
				<% end %>	
			</tbody>
		</table>
	</div>
</div>

<%= render partial: "shared/panelbottom" %>


<%= render partial: "shared/paneltop" %>

	<div class="row">
		<div class="medium-12 columns">
			<h1>Brand Portfolio</h1>
		</div>
	</div>
	<div class="row">
		<div class="medium-12 columns">
			<h3>Current Portfolio</h3>
		</div>
	</div>

	<% if !@current_brands.empty? %>
		<% @current_brands.each do |cb| %>
		<div class="rowitem">
		<div class="row">
			<div class="medium-12 columns">
				<%= form_for cb do |f| %>
				<div class="rowheadback">
					<div class="row">
						<div class="medium-8 columns">
							<%= cb.brand %> &nbsp;
						</div>
						<div class="medium-4 columns">
							&nbsp;
						</div>
					</div>
				</div>	
				<div class="row">
					<div class="medium-1 columns">
						&nbsp;
					</div>
					<div class="medium-7 columns">
						<%= f.text_field :brand, label: "Brand Name" %>
					</div>
					<div class="medium-4 columns">
						<%= f.select :category, options_from_collection_for_select(Sector.all.sort_by {|m| m.name.downcase}, :id, :name, cb.category), :prompt => 'Select Category', label: "Category" %>
					</div>					
				</div>
				<div class="row">
					<div class="medium-1 columns">
						&nbsp;
					</div>						
					<div class="medium-7 columns">
						<%= f.text_field :website, label: "Website" %>
					</div>
					<div class="medium-4 columns">
						<%= f.text_field :country_of_manufacture, class: "country-autocomplete-multi", label: "Country of Manufacture", placeholder: 'Country' %>
					</div>				
				</div>
				<div class="row">
					<div class="medium-8 columns">
						&nbsp;
					</div>
					<div class="medium-2 columns">
						<%= link_to 'Update', "#", :onclick => "$('#edit_#{dom_id(cb)}').submit()".html_safe %>
					</div>
					<div class="medium-2 columns">
						<%= link_to 'Delete', cb, :method => :delete, data: { :confirm => "Are you sure you want to delete #{cb.brand}?"}%>
					</div>
				</div>				
				<% end %>
			</div>
		</div>
		</div>
		<% end %>
	<% else %>
		No Current Brands
	<% end %>


	<%= form_for @new_brand, :html => { :id => "new_current_brand" } do |f| %>
	<%= f.hidden_field :current, value: true %>

			<%= f.text_field :brand, label: false, placeholder: 'Brand' %>
			<%= f.select :category, options_from_collection_for_select(Sector.all.sort_by {|m| m.name.downcase}, :id, :name, :prompt => 'Select Category'), :prompt => 'Select Category', label: false %>
			<%= f.text_field :website, label: false, placeholder: 'Website'  %>
			<%= f.text_field :country_of_manufacture, class: "country-autocomplete-multi", label: false, placeholder: 'Country' %>
			<%= link_to 'Add', "#", :onclick => "$('#new_current_brand').submit()".html_safe %>

	<% end %>


	<h3>Past Portfolio</h3>
	<table>
	<thead><tr><th>Brand</th><th>Category</th><th>Website</th><th>Country of Manufacture</th><th colspan="2">&nbsp;</th></tr></thead>
	<tbody>
	<% if !@past_brands.empty? %>
		<% @past_brands.each do |cb| %>
		<tr>
			<%= form_for cb do |f| %>
			<td><%= f.text_field :brand, label: false %></td>
			<td>
					<%= f.select :category, options_from_collection_for_select(Sector.all.sort_by {|m| m.name.downcase}, :id, :name, cb.category), :prompt => 'Select Category', label: false %>
			</td>
			<td><%= f.text_field :website, label: false %></td>
			<td><%= f.text_field :country_of_manufacture, class: "country-autocomplete-multi", label: false, placeholder: 'Country' %></td>
			<td>
					<%= link_to 'Update', "#", :onclick => "$('#edit_#{dom_id(cb)}').submit()".html_safe %>
			</td>
			<td><%= link_to 'Delete', cb, :method => :delete, data: { :confirm => "Are you sure you want to delete #{cb.brand}?"}%></td>
			<% end %>
		</tr>	
		<% end %>
	<% else %>
		<tr><td colspan="4">No Past Brands</td></tr>
	<% end %>

	<%= form_for @new_brand, :html => { :id => "new_past_brand" } do |f| %>
	<%= f.hidden_field :current, value: false %>

			<tr>
			<td><%= f.text_field :brand, label: false, placeholder: 'Brand' %></td>
			<td>
					<%= f.select :category, options_from_collection_for_select(Sector.all.sort_by {|m| m.name.downcase}, :id, :name, :prompt => 'Select Category'), :prompt => 'Select Category', label: false %>
			</td>
			<td><%= f.text_field :website, label: false, placeholder: 'Website' %></td>
			<td><%= f.text_field :country_of_manufacture, class: "country-autocomplete-multi", label: false, placeholder: 'Country' %></td>
			<td colspan="2"><%= link_to 'Add', "#", :onclick => "$('#new_past_brand').submit()".html_safe %></td>
			</tr>

	<% end %>
	</tbody>
	</table>

<%= render partial: "shared/panelbottom" %>


<%= render partial: "shared/paneltop" %>
	<div class="row">
		<div class="medium-12 columns">
			<h1>Sales / Education Capabilities</h1>
		</div>
	</div>
				
	<%= form_for @distributor, url: distributor_url do |f| %>
	<div class="row">

		<div class="medium-12 columns">
			<%= render partial: "shared/numeric_field", locals: {f: f, field: :outside_sales_size, fieldlabel: 'Outside Sales Force Size' } %>
		</div>
	</div>
	<div class="row">
		<div class="medium-12 columns">
			<%= render partial: "shared/numeric_field", locals: {f: f, field: :inside_sales_size, fieldlabel: 'Inside Sales Force Size' } %>	
		</div>
	</div>
	<div class="row">
		<div class="medium-12 columns">
			<%= f.submit 'Update', class: "small radius success button right" %>
		</div>
	</div>
	<% end %>	

<%= render partial: "shared/panelbottom" %>

<%= render partial: "shared/paneltop" %>
	<div class="row">
		<div class="medium-12 columns">
			<h1>Trade Shows</h1>
		</div>
	</div>

			<div class="row">
				<div class="medium-12 columns">
					
					<h3>Shows Participated In</h3>
					<table>
					<thead><tr><th>Show Name</th><th>Date</th><th>Country</th><th>Years Participated</th><th>Website</th><th colspan="2">&nbsp;</th></tr></thead>
					<tbody>
					<% if !@trade_shows.empty? %>
						<% @trade_shows.each do |cb| %>
						<tr>
							<%= form_for cb do |f| %>
							<td><%= f.text_field :name, label: false %></td>
							<td><%= f.text_field :date, label: false, class: "datepick", :value => cb.date ? cb.date.strftime("%m/%Y") : '' %></td>
							<td><%= f.text_field :country, class: "country-autocomplete", label: false, placeholder: 'Country' %></td>
							<td><%= f.text_field :years_participated, label: false %></td>
							<td><%= f.text_field :website, label: false %></td>
							<td>
									<%= link_to 'Update', "#", :onclick => "$('#edit_#{dom_id(cb)}').submit()".html_safe %>
							</td>
							<td><%= link_to 'Delete', cb, :method => :delete, data: { :confirm => "Are you sure you want to delete #{cb.name}?"}%></td>
							<% end %>
						</tr>	
						<% end %>
					<% else %>
						<tr><td colspan="4">No Trade Shows</td></tr>
					<% end %>

					<%= form_for @new_trade_show, :html => { :id => "new_trade_show" } do |f| %>
							<tr>
							<td><%= f.text_field :name, label: false, placeholder: 'Trade Show Name' %></td>
							<td><%= f.text_field :date, label: false, placeholder: 'Date' , class: "datepick" %></td>
							<td><%= f.text_field :country, class: "country-autocomplete", label: false, placeholder: 'Country' %></td>
							<td><%= f.text_field :years_participated, label: false, placeholder: 'Years participated' %></td>
							<td><%= f.text_field :website, label: false, placeholder: 'Website' %></td>
							<td colspan="2"><%= link_to 'Add', "#", :onclick => "$('#new_trade_show').submit()".html_safe %></td>
							</tr>
					<% end %>
					</tbody>
					</table>
					
				</div>
			</div>				

<%= render partial: "shared/panelbottom" %>

<%= render partial: "shared/paneltop" %>

	<div class="row">
		<div class="medium-12 columns">
			<h1>Marketing/PR Capabilities</h1>
		</div>
	</div>
	<%= form_for @distributor, url: distributor_url do |f| %>


	<div class="row">
		<div class="medium-12 columns">
			<h3>Internal Marketing/PR</h3>
		</div>
	</div>
	<div class="row">
		<div class="medium-12 columns">
			<%= render partial: "shared/numeric_field", locals: {f: f, field: :internal_marketing_size, fieldlabel: 'Internal Marketing/Design Team Size' } %>
		</div>
	</div>

	<div class="row">
		<div class="medium-12 columns">
			<h3>External Marketing/PR</h3>
		</div>
	</div>
	<div class="row">
		<div class="medium-12 columns">

			<%= radio_button_tag("distributor[employ_pr_agency]", false,  (@distributor.employ_pr_agency rescue false) ? false : true ) %>
			<%= label_tag("distributor[employ_pr_agency]_false", "No, we do not employ an outside PR Agency") %>
			<%= radio_button_tag("distributor[employ_pr_agency]", true, (@distributor.employ_pr_agency rescue false) ? true : false ) %>
			<%= label_tag("distributor[employ_pr_agency]_true", "Yes, we employ an outside PR Agency") %>

		</div>
	</div>				

	<div class="row">
		<div class="medium-12 columns">
			<h3>Where have you marketed/advertised your products?</h3>
		</div>
	</div>
	<div class="row">
		<div class="medium-4 columns">
			<%= render partial: "shared/checkbox", locals: {field: "marketing_via_print", label: 'Print' } %>
			<%= render partial: "shared/checkbox", locals: {field: "marketing_via_online", label: 'Online' } %>
			<%= render partial: "shared/checkbox", locals: {field: "marketing_via_email", label: 'Email' } %>
			<%= render partial: "shared/checkbox", locals: {field: "marketing_via_outdoor", label: 'Outdoor' } %>
		</div>
		<div class="medium-4 columns end">
			<%= render partial: "shared/checkbox", locals: {field: "marketing_via_events", label: 'Events' } %>
			<%= render partial: "shared/checkbox", locals: {field: "marketing_via_direct_mail", label: 'Direct Mail' } %>
			<%= render partial: "shared/checkbox", locals: {field: "marketing_via_classes", label: 'Classes' } %>
		</div>
	</div>	

	<div class="row">
		<div class="medium-12 columns">
			<h3>Customer Database</h3>
		</div>
	</div>
	<div class="row">
		<div class="medium-12 columns">
			<%= render partial: "shared/numeric_field", locals: {f: f, field: :customer_database_size, fieldlabel: 'Customer Database Size' } %>	
		</div>
	</div>

		 <%= f.submit 'Update' %>

	<% end %>

<%= render partial: "shared/panelbottom" %>



	</div>
</div>


