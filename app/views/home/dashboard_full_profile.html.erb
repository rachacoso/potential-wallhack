
<%= render partial: "shared/topbar" %>

<% content_for :javascript_foot do %>
	<%= javascript_tag do %>

	<% end %>
<% end %>

	<div class="row">

		<div class="medium-4 columns">
			
				&nbsp;
			
		</div>


	<% if @current_user.distributor %>


		<div class="medium-8 columns text-right">
			<div class="previewtile">

				<div class="row">
					<div class="small-12 columns text-right">

						<span id="profile-name"><%= @profile.name %></span>
						<span id="year-established"><%= @profile.year_established.strftime("est. %Y") rescue nil %></span>
	
						<br><small><%= link_to 'Edit Distributor Profile', distributor_url %></small>

					</div>
				</div>

				<div class="row">
					<div class="small-12 columns clearfix">
						<dl class="tabs right" id="myTabs" data-tab>
						  <dd class="active"><a href="#panel1"><%= render partial: "shared/svg/globe" %></a></dd>
						  <dd><a href="#panel2"><%= render partial: "shared/svg/employees" %></a></dd>
						  <dd><a href="#panel3"><%= render partial: "shared/svg/sector" %></a></dd>
						  <dd><a href="#panel4"><%= render partial: "shared/svg/channel" %></a></dd>
						</dl>
					</div>
				</div>

				<div class="tabs-content">
				  <div class="content active" id="panel1">
										
										<div class="preview-data">
											<%= @profile.country_of_origin %>
										</div>

				  </div>
				  <div class="content" id="panel2">

										<div class="preview-data">
											<%= CompanySize.find(@profile.company_size).name %> 
										</div>   

				  </div>
				  <div class="content" id="panel3">

						<div class="preview-data">
							<% @profile.sectors.each do |s| %>
								<%= s.name %><br>
							<% end %>
						</div> 

				  </div>
				  <div class="content" id="panel4">

 						<div class="preview-data">
							<% @profile.channels.each do |ch| %>
								<%= ch.name %><br>
							<% end %>
						</div>

				  </div>
				</div>

			</div>
		</div>
	</div>

	<% end %>

	<% if @current_user.brand %>


		<div class="medium-9 columns previewtile">

			<div class="row">
				<div class="small-12 columns text-right">

					<small><%= link_to 'View PUBLIC Profile', dashboard_public_profile_url, class: "itemformlink"%></small>
					<small><%= link_to 'Viewing FULL Profile', "#", class: "itemformlink active"%></small>
					<small><%= link_to 'EDIT Brand Profile', brand_url, class: "itemformlink"%></small><br>
					<div id="profile-name"><%= @profile.company_name %></div>
					<div id="profile-year-established"><%= @profile.year_established.strftime("est. %Y") rescue nil %></div>
					<div id="profile-website"><%= link_to @profile.website, "//#{@profile.website}" %></div>

				</div>
			</div>

			<div class="row">
				<div class="medium-4 columns">
					<dl class="tabs" id="tabs" data-tab>
					  <dd class="active"><a href="#panel1"><%= render partial: "shared/svg/globe" %></a></dd>
					  <dd><a href="#panel2"><%= render partial: "shared/svg/factory" %></a></dd>
					  <dd><a href="#panel3"><%= render partial: "shared/svg/employees" %></a></dd>
					  <dd><a href="#panel4"><%= render partial: "shared/svg/shipping" %></a></dd>
					  <dd><a href="#panel5"><%= render partial: "shared/svg/sector" %></a></dd>
					  <dd><a href="#panel6"><%= render partial: "shared/svg/channel" %></a></dd>
					  <dd><a href="#panel7"><%= render partial: "shared/svg/sku" %></a></dd>
					  <dd><a href="#panel8"><%= render partial: "shared/svg/press" %></a></dd>
					  <dd><a href="#panel9"><%= render partial: "shared/svg/tradeshow" %></a></dd>
					  <dd><a href="#panel10"><%= render partial: "shared/svg/patent" %></a></dd>
					  <dd><a href="#panel11"><%= render partial: "shared/svg/trademark" %></a></dd>
					  <dd><a href="#panel12"><%= render partial: "shared/svg/certification" %></a></dd>
					</dl>
				</div>
				<div class="medium-8 columns">
					<div class="tabs-content">
					  <div class="content active" id="panel1">

					  	<div class="preview-data-title">
								Country of Origin
							</div>
							<div class="preview-data">
								<h1><%= @profile.country_of_origin %></h1>
							</div>

					  	<div class="preview-data-title">
								General Information
							</div>
							<div class="preview-data">
								<h4><strong><%= @profile.contact_info.contact_name %></strong>, <%= @profile.contact_info.contact_title %><br>
										<%= @profile.contact_info.email %>, <%= @profile.contact_info.phone %>
								</h4>
								<h4><%= @profile.contact_info.address1 %><br><%= @profile.contact_info.address2 %><br>
										<%= @profile.contact_info.city %> <%= @profile.contact_info.state %>, <%= @profile.contact_info.postcode %><br>
										<%= @profile.contact_info.country %>
								</h4>								
							</div>


					  </div>
					  <div class="content" id="panel2">


									  	<div class="preview-data-title">
												Countries of Manufacture
											</div>
											<div class="preview-data">
												<table>
													<tr><th>Country</th><th>Products manufactured there</th></tr>
												<% @profile.products.distinct(:country_of_manufacture).each do |country| %>
													<tr>
														<td>
															<%= country %>
														</td>
														<td>
														<% @profile.products.where(country_of_manufacture: country).each do |p| %>
															<%= p.name %><br>
														<% end %>
														</td>
													</tr>
												<% end %>
												</table>
											</div>    

					  </div>
					  <div class="content" id="panel3">

									  	<div class="preview-data-title">
												Company Size
											</div>
											<div class="preview-data">
												<h1><%= CompanySize.find(@profile.company_size).name %></h1>
											</div>    

					  </div>
					  <div class="content" id="panel4">

									  	<div class="preview-data-title">
												Countries of Export
											</div>
											<div class="preview-data">
												<% @profile.export_countries.each do |ec| %>
													<strong><%= ec.country %></strong><br>
												<% end %>
											</div>    

					  </div>
					  <div class="content" id="panel5">
					    
									  	<div class="preview-data-title">
												Sectors
											</div>
											<div class="preview-data">
												<% @profile.sectors.each do |s| %>
													<strong><%= s.name %></strong><br>
												<% end %>
											</div>

					  </div>
					  <div class="content" id="panel6">
					 

											<div class="preview-data-title">
												Channels ( Capacity )
											</div>
											<div class="preview-data">
												<% @profile.channels.each do |ch| %>
													<strong><%= ch.name %></strong> ( <%= @profile.channel_capacities.where(channel_id: ch.id).first.capacity || "TBD" %> )<br>
												<% end %>
											</div>

											<% if @profile.channel_capacities.where(channel_id: 0).length > 0 %>
	 								  	<div class="preview-data-title">
												Custom Channels ( Capacity )
											</div>
											<div class="preview-data">
												<% @profile.channel_capacities.where(channel_id: 0).each do |cch| %>
													<strong><%= cch.custom_channel_name %></strong> ( <%= cch.capacity || "TBD" %> )<br>
												<% end %>
											</div>											
											<% end %>

					  </div>

					  <div class="content" id="panel7">

											<div class="preview-data-title">
												Current Products
											</div>
											<div class="preview-data">

												<% if @profile.products.where(current: true).length > 0 %>
													<% @profile.products.where(current: true).each do |p| %>
														<%= render partial: "shared/collections_view/products", locals: {
															collitem: p
														} %>
													<% end %>
												<% else %>
												<br>
													[No Current Products]
												<% end %>

											</div>


											<div class="preview-data-title">
												Upcoming Products
											</div>
											<div class="preview-data">

												<% if @profile.products.where(current: false).length > 0 %>
													<% @profile.products.where(current: false).each do |p| %>
														<%= render partial: "shared/collections_view/products", locals: {
															collitem: p
														} %>
													<% end %>
												<% else %>
												<br>
													[No Upcoming Products]
												<% end %>

											</div>

					  </div>

					  <div class="content" id="panel8">

											<div class="preview-data-title">
												Press Hits
											</div>
											<div class="preview-data">

												<% if @profile.press_hits.length > 0 %>
													<% @profile.press_hits.each do |p| %>
														<%= render partial: "shared/collections_view/press_hits", locals: {
															collitem: p
														} %>
													<% end %>
												<% else %>
												<br>
													[No Press Clips]
												<% end %>

											</div>
						</div>

					  <div class="content" id="panel9">

											<div class="preview-data-title">
												Trade Shows
											</div>
											<div class="preview-data">

												<% if @profile.trade_shows.length > 0 %>
													<% @profile.trade_shows.each do |p| %>
														<%= render partial: "shared/collections_view/trade_shows", locals: {
															collitem: p
														} %>
													<% end %>
												<% else %>
												<br>
													[No Trade Shows]
												<% end %>

											</div>
						</div>


					  <div class="content" id="panel10">

											<div class="preview-data-title">
												Patents
											</div>
											<div class="preview-data">
												<% if @profile.patents.length > 0 %>
													<% @profile.patents.each do |p| %>
														<%= render partial: "shared/collections_view/patents", locals: {
															collitem: p
														} %>
													<% end %>
												<% else %>
													[No Patents]
												<% end %>
											</div>
						</div>

					  <div class="content" id="panel11">

											<div class="preview-data-title">
												Trademarks
											</div>
											<div class="preview-data">
												<% if @profile.trademarks.length > 0 %>
													<% @profile.trademarks.each do |p| %>
														<%= render partial: "shared/collections_view/trademarks", locals: {
															collitem: p
														} %>
													<% end %>
												<% else %>
												<br>
													[No Trademarks]
												<% end %>
											</div>
						</div>


					  <div class="content" id="panel12">

											<div class="preview-data-title">
												Certifications / Regulatory Compliance
											</div>
											<div class="preview-data">
												<% if @profile.compliances.length > 0 %>
													<% @profile.compliances.each do |p| %>
														<%= render partial: "shared/collections_view/compliance", locals: {
															collitem: p
														} %>
													<% end %>
												<% else %>
													<br>
													[No Certifications / Regulatory Compliances]
												<% end %>
											</div>
						</div>


					</div>					
				</div>

</div>

		</div>










		
	</div>

	<% end %>
