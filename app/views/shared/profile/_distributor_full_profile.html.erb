
<div class="row">
	<div class="small-12 columns">
		
		<div class="profile-outer-tile">
			<div class="row">

				<div class="medium-2 columns">
					<%= image_tag profile.logo.url, width: "100", height: "100", alt: "Logo" %>
				</div>		
				<div class="medium-7 columns">
					<h1><%= profile.company_name %></h1>
					<%= render partial: "shared/profile/distributor_rating", locals: {d: profile} %>
					<h3><small>web</small> <strong><%= link_to profile.website, "//#{profile.website}" %></strong></h3>

					<% if this_match(profile) %>
						<% if i_contacted(this_match(profile)) %>
							<span class="plt-indicator-info"><strong>You Contacted</strong> <%= profile.company_name %></span>
						<% else %>
							<span class="plt-indicator-info"><%= profile.company_name %> <strong>Contacted You</strong></span>
						<% end %>
					<% end %>

					<% if this_match(profile) %>
						<% if !this_match(profile).messages.blank? %>
							<span class="plt-indicator-info">In Conversation</span>
						<% end %>
					<% end %>

				<% if profile.user.last_login %>
					<span class="plt-indicator-info">Active in the past <strong><%= last_activity(profile.user.last_login) %></strong></span>
				<% end %>
				<br>
				</div>
				<% if controller_name == "matches" %>
				<div class="medium-3 columns text-right"><%= render partial: "contactbutton", locals: {profile: @match} %> <%= render partial: "shared/profile/components/savebutton", locals: {profile: @match} %></div>
				<% else %>
				<%# NEEDED FOR FORMATTING OF PROFILE VIEW IN EDITING PAGES PURPOSES%> 
				<div class="medium-3 columns">&nbsp;</div>
				<% end %>
			</div>
		</div>

		<div class="profile-outer-tile">

			<div class="row">
				<div class="medium-8 large-9 columns">

									<div class="row">
										<div class="small-12 columns">

											<div class="preview-data">
												<span class="preview-data-tile-title"><h2><strong>Current Brand Portfolio</strong></h2></span>


													<% if profile.distributor_brands.where(current: true).length > 0 %>
														<% profile.distributor_brands.where(current: true).each do |p| %>
															<%= render partial: "shared/collections_view/distributor_brands", locals: {
																collitem: p
															} %>
														<% end %>
													<% else %>
													<br>
														[No Current Brands]
													<% end %>										


											</div>

										</div>
									</div>	


									<div class="row">
										<div class="small-12 columns">

											<div class="preview-data">
												<span class="preview-data-tile-title"><h2><strong>Past Brand Portfolio</strong></h2></span>


												<% if profile.distributor_brands.where(current: false).length > 0 %>
													<% profile.distributor_brands.where(current: false).each do |p| %>
														<%= render partial: "shared/collections_view/distributor_brands", locals: {
															collitem: p
														} %>
													<% end %>
												<% else %>
												<br>
													[No Past Brands]
												<% end %>


											</div>

										</div>
									</div>								

		<hr>

<!-- 									<div class="row">
										<div class="small-12 columns">

											<div class="preview-data">
												<span class="preview-data-tile-title"><strong>Trade Shows</strong></span><br>

													<% if profile.trade_shows.length > 0 %>
														<% profile.trade_shows.each do |p| %>
															<%= render partial: "shared/collections_view/trade_shows", locals: {
																collitem: p
															} %>
														<% end %>
													<% else %>
													<br>
														[No Trade Shows]
													<% end %>

											</div>

										</div>
									</div>	 -->

							<div class="row">
								<div class="small-6 columns">
											<div class="preview-data">
												<span class="preview-data-tile-title"><strong>Channel Capacities</strong></span>
													<table width="100%">
														<% profile.channels.each do |ch| %>
															<tr>
																<td>
																	<%= ch.name  %> :
																	<strong><%= profile.channel_capacities.where(channel_id: ch.id).first.capacity %></strong>
																</td>
															</tr>
														<% end %>

														<% if profile.channel_capacities.where(channel_id: 0).length > 0 %>
															<% profile.channel_capacities.where(channel_id: 0).each do |cch| %>
																<tr>
																	<td><%= cch.custom_channel_name %> <small>(Custom Channel)</small> :
																		<strong><%= cch.capacity %></strong>
																	</td>
																</tr>
															<% end %>
														<% end %>								
													</table>
											</div>
								</div>

								<div class="small-6 columns">

									<div class="preview-data">
										<span class="preview-data-tile-title"><strong>Sales and Education</strong></span><br>
										<table width="100%">
											<tr>
												<td>
													<h6>Inside Sales Force: <strong><%= profile.inside_sales_size %></strong></h6>
												</td>
											</tr>
											<tr>
												<td>
													<h6>Outside Sales Force: <strong><%= profile.outside_sales_size %></strong></h6>
												</td>
											</tr>
										</table>
									</div>
									
								</div>
							</div>


							<div class="row">
								<div class="small-12 columns">
									<div class="preview-data">

										<span class="preview-data-tile-title"><strong>Marketing and PR</strong></span><br>

										<table width="100%">
											<tr>
												<td>
													<h6>Internal Marketing/ PR Team Size: <strong><%= profile.internal_marketing_size %></strong></h6>
												</td>
											</tr>
											<tr>
												<td>
													<h6><strong><%= profile.employ_pr_agency ? "Has" : "No" %></strong> External Marketing/PR<h6>
												</td>
											</tr>
											<tr>
												<td>
													<h6>Customer Database Size: <strong><%= profile.customer_database_size %></strong></h6>
												</td>
											</tr>
											<tr>
												<td>
													<div class="row">
														<div class="small-4 columns">
															<h6>Product Marketing:</h6>
														</div><!--/.small-4-->
														<div class="small-8 columns">

															<div class="row">
																<div class="small-6 columns">
																	<strong>
																	<%= render partial: "/shared/profile/components/distributor_marketing_type", locals: {name: "Print" ,p: profile.marketing_via_print}%>
																	<%= render partial: "/shared/profile/components/distributor_marketing_type", locals: {name: "Online" ,p: profile.marketing_via_online}%>
																	<%= render partial: "/shared/profile/components/distributor_marketing_type", locals: {name: "Email" ,p: profile.marketing_via_email}%>
																	</strong>
																</div><!--/.small-6-->
																<div class="small-6 columns">
																	<strong>
																	<%= render partial: "/shared/profile/components/distributor_marketing_type", locals: {name: "Outdoor" ,p: profile.marketing_via_outdoor}%>													
																	<%= render partial: "/shared/profile/components/distributor_marketing_type", locals: {name: "Events" ,p: profile.marketing_via_events}%>
																	<%= render partial: "/shared/profile/components/distributor_marketing_type", locals: {name: "Direct Mail" ,p: profile.marketing_via_direct_mail}%>
																	<%= render partial: "/shared/profile/components/distributor_marketing_type", locals: {name: "Classes" ,p: profile.marketing_via_classes}%>		
																	</strong>
																</div><!--/.small-6-->
															</div><!--/.row-->		

														</div><!--/.small-8-->
													</div><!--/.row-->
												</td>
											</tr>			
										</table>										

									</div>
								</div>
							</div>


				</div> <!--/.medium-8 large-9 columns -->
				

				<div class="medium-4 large-3 columns text-right">


							<div class="row">
								<div class="small-12 columns">
									<div class="preview-data">
										<span class="preview-data-tile-title">Headquarters</span><br>
										<strong><%= profile.country_of_origin %></strong>
									</div>
								</div>
							</div>


							<div class="row">
								<div class="small-12 columns">
									<div class="preview-data">
										<span class="preview-data-tile-title">Company Size</span><br>
										<strong><%= CompanySize.find(profile.company_size).name rescue nil %></strong>
									</div>
								</div>
							</div>	

							<div class="row">
								<div class="small-12 columns">
									<div class="preview-data">
										<span class="preview-data-tile-title">Year Established</span><br>
										<strong><%= profile.year_established.strftime("%Y") rescue nil %></strong>
									</div>
								</div>
							</div>					

							<div class="row">
								<div class="small-12 columns">
									<div class="preview-data">
										<span class="preview-data-tile-title">Countries of Distribution</span><br>
										<strong>
											<% profile.export_countries.sort_by{ |m| m.country.downcase }.each do |ec| %>
												<%= ec.country %><br>
											<% end %>
										</strong>
									</div>
								</div>
							</div>


							<div class="row">
								<div class="small-12 columns">
									<div class="preview-data">
										<span class="preview-data-tile-title">Sectors</span><br>
										<% profile.sectors.each do |s| %>
											<strong><%= s.name %></strong><br>
										<% end %>
									</div>
								</div>
							</div>

							<div class="row">
								<div class="small-12 columns">
									<div class="preview-data">
										<span class="preview-data-tile-title">Channels</span><br>
										<% profile.channels.each do |ch| %>
											<strong><%= ch.name %></strong><br>
										<% end %>
										<% if profile.channel_capacities.where(channel_id: 0).length > 0 %>
											<% profile.channel_capacities.where(channel_id: 0).each do |cch| %>
												<strong><%= cch.custom_channel_name %> *</strong><br>
											<% end %>
											<small>(* Custom Channels)</small>
										<% end %>
									</div>
								</div>
							</div>


							<div class="row">
								<div class="small-12 columns">
									<div class="preview-data">
										<span class="preview-data-tile-title">General Contact Information</span><br>
										  <strong><%= profile.contact_info.contact_name %>,<br> <%= profile.contact_info.contact_title %><br></strong>
										  <%= profile.contact_info.address1 %><br>
										  <%= profile.contact_info.address2 %><br>
										  <% unless profile.contact_info.city.blank? && profile.contact_info.state.blank? && profile.contact_info.postcode.blank? %>
										  <%= profile.contact_info.city %> <%= profile.contact_info.state %> <%= profile.contact_info.postcode %><br>
										  <% end %>
										  <%= profile.contact_info.country %><br>
										  <%= profile.contact_info.phone %><br>
										  <a href="mailto:<%= profile.contact_info.email %>"><%= profile.contact_info.email %></a>
									</div>

								</div>
							</div>
							
				</div> <!--/.medium-3 columns -->

			</div> <!--/.row -->
		</div> <!--/.profile-outer-tile -->

	</div><!--/.medium-11 medium-centered-->
</div><!--/.row-->
